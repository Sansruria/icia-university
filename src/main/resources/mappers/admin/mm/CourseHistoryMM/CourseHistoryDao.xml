<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="kr.ac.icia.dao.admin.mm.coursehistory.CourseHistoryDao">

<select id="list" resultType ="CourseHistorySearchListDto">
 SELECT
        ROW_NUMBER() OVER (ORDER BY s.create_date DESC, s.course_id DESC) AS rnum,
        s.course_id,
        s.course_division,
        d.department_name AS deptName,
        s.course_name,
        p.pf_name AS pfname,
        s.course_day, -- 수강요일
        s.course_start_time, -- 수강시작기간
        s.course_end_time, -- 수강종료기간
        s.limit_max_count
    FROM subject s
    JOIN department d ON d.department_id = s.department_id
    JOIN pf p ON p.pf_id = s.pf_id
</select>

<!-- <select id="findAllCount" resultType="Integer"> -->
<!-- SELECT COUNT(*)FROM (select NVL(c.course_id, 'C1')as limit_max_count from course_request -->
<!--        join subject s on course_request.course_id = s.course_id -->
<!--        LEFT OUTER JOIN course_request c on s.course_id = c.course_id -->
<!--        where limit_max_count >= 30 ); -->
<!-- </select> -->
<!-- 등록 -->
	<insert id="write">
<!-- 	컬럼이름 -->
		INSERT INTO subject(
		course_id,
		pf_id,
		department_id,
		course_name,
		grade,
		semester,
		credit,
		course_division,
		course_day,
		course_start_time,
		course_end_time,
		limit_max_count
		)
		VALUES(
		#{course_id},
		#{pfId},
		#{deptId},
		#{deptName},
		#{grade},
		#{semester},
		#{credit},
		#{course_division},
		#{course_day},
		#{course_start_time},
		#{course_end_time},
		#{limit_max_count}
		)
	</insert>
<!-- 등록 -->
</mapper>